<script props>
  const hasOwnProp = (key) => Object.prototype.hasOwnProperty.call(props, key);

  // Legacy migration: detect old templates with image-side prop
  const legacyImageSide = props['image-side'];
  const legacyTextSide = legacyImageSide === 'left' ? 'right' : legacyImageSide === 'right' ? 'left' : null;

  // Section-level prop resolver (border, bg-color — not per-side)
  const getSectionProp = (key, fallback = '') => {
    if (hasOwnProp(key)) return props[key] || fallback;
    // Legacy: may have been stored under a side prefix
    if (hasOwnProp('left-' + key)) return props['left-' + key] || fallback;
    if (hasOwnProp('right-' + key)) return props['right-' + key] || fallback;
    return fallback;
  };

  // Build all props for one side of the split
  const buildSide = (side) => {
    const get = (key, fallback = '') => {
      const scoped = side + '-' + key;
      if (hasOwnProp(scoped)) return props[scoped] || fallback;
      // Legacy: if image-side exists, route content props to the correct side
      if (legacyImageSide && hasOwnProp(key)) {
        const imageKeys = ['image', 'image-alt', 'image-fit', 'image-position', 'overlay-color', 'overlay-opacity'];
        if (imageKeys.includes(key)) return side === legacyImageSide ? (props[key] || fallback) : fallback;
        // Text content props belong to the text side only
        const textContentKeys = ['eyebrow', 'headline', 'description', 'primary-button-text', 'primary-button-url', 'secondary-button-text', 'secondary-button-url'];
        if (textContentKeys.includes(key)) return side === legacyTextSide ? (props[key] || fallback) : fallback;
        // Shared props (font, sizes, colors, padding, etc.) — available to both sides
        return props[key] || fallback;
      }
      // No legacy routing: fall back to unscoped (shared value)
      if (hasOwnProp(key)) return props[key] || fallback;
      return fallback;
    };

    // Strip lone <br> tags and whitespace-only content
    const stripEmpty = (val) => {
      if (!val) return '';
      const stripped = val.replace(/<br\s*\/?>/gi, '').replace(/&nbsp;/gi, '').trim();
      return stripped ? val : '';
    };

    return {
      sideId: side,
      sideClass: 'loomi-split-' + side,
      // Image
      image: get('image'),
      imageAlt: get('image-alt'),
      imageFit: get('image-fit') || 'auto',
      imagePosition: get('image-position', 'center center'),
      overlayColor: get('overlay-color', '#000000'),
      overlayOpacity: get('overlay-opacity', '0'),
      get hasOverlay() {
        return this.image && parseInt(this.overlayOpacity || '0', 10) > 0;
      },
      get overlayRgba() {
        const hex = this.overlayColor || '#000000';
        const r = parseInt(hex.slice(1,3), 16);
        const g = parseInt(hex.slice(3,5), 16);
        const b = parseInt(hex.slice(5,7), 16);
        const a = (parseInt(this.overlayOpacity || '0', 10) / 100).toFixed(2);
        return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';
      },
      // Content
      eyebrow: stripEmpty(get('eyebrow')),
      headline: stripEmpty(get('headline')),
      description: stripEmpty(get('description')),
      // Typography
      font: get('font', 'Helvetica Neue, Helvetica, Arial, sans-serif'),
      eyebrowSize: get('eyebrow-size', '11px'),
      eyebrowWeight: get('eyebrow-weight', '600'),
      eyebrowSpacing: get('eyebrow-spacing', '3px'),
      eyebrowTransform: get('eyebrow-transform', 'uppercase'),
      eyebrowColor: get('eyebrow-color', 'rgba(0,0,0,0.5)'),
      eyebrowMargin: get('eyebrow-margin', '0 0 12px 0'),
      headlineSize: get('headline-size', '28px'),
      headlineWeight: get('headline-weight', '700'),
      headlineSpacing: get('headline-spacing', 'normal'),
      headlineTransform: get('headline-transform', 'none'),
      headlineLineHeight: get('headline-line-height', '1.2'),
      headlineColor: get('headline-color', '#1a1a1a'),
      headlineMargin: get('headline-margin', '0 0 12px 0'),
      descriptionSize: get('description-size', '15px'),
      descriptionWeight: get('description-weight', '400'),
      descriptionLineHeight: get('description-line-height', '1.6'),
      descriptionColor: get('description-color', '#444444'),
      descriptionMargin: get('description-margin', '0 0 24px 0'),
      // Primary button
      primaryButtonText: get('primary-button-text'),
      primaryButtonUrl: get('primary-button-url', '{{custom_values.website_url}}'),
      primaryButtonBgColor: get('primary-button-bg-color', '#1a1a1a'),
      primaryButtonTextColor: get('primary-button-text-color', '#ffffff'),
      primaryButtonRadius: get('primary-button-radius', '0'),
      primaryButtonPadding: get('primary-button-padding', '14px 28px'),
      primaryButtonBorderStyle: get('primary-button-border-style'),
      primaryButtonBorderWidth: get('primary-button-border-width'),
      primaryButtonBorderColor: get('primary-button-border-color'),
      get primaryButtonBorderCss() {
        const style = this.primaryButtonBorderStyle || (this.primaryButtonBorderWidth || this.primaryButtonBorderColor ? 'solid' : '');
        if (style === 'none') return '';
        if (style) {
          const width = this.primaryButtonBorderWidth || '1px';
          const color = this.primaryButtonBorderColor || this.primaryButtonTextColor || '#000000';
          return ' border: ' + width + ' ' + style + ' ' + color + ';';
        }
        return '';
      },
      primaryButtonFontSize: get('primary-button-font-size', '12px'),
      primaryButtonFontWeight: get('primary-button-font-weight', '700'),
      primaryButtonLetterSpacing: get('primary-button-letter-spacing', '2px'),
      primaryButtonTextTransform: get('primary-button-text-transform', 'uppercase'),
      // Button gap
      buttonGap: get('button-gap', '12px'),
      // Secondary button
      secondaryButtonText: get('secondary-button-text'),
      secondaryButtonUrl: get('secondary-button-url', '{{custom_values.website_url}}'),
      secondaryButtonBgColor: get('secondary-button-bg-color', 'transparent'),
      secondaryButtonTextColor: get('secondary-button-text-color', '#1a1a1a'),
      secondaryButtonRadius: get('secondary-button-radius', '0'),
      secondaryButtonPadding: get('secondary-button-padding', '14px 28px'),
      secondaryButtonBorderStyle: get('secondary-button-border-style'),
      secondaryButtonBorderWidth: get('secondary-button-border-width'),
      secondaryButtonBorderColor: get('secondary-button-border-color'),
      get secondaryButtonBorderCss() {
        const style = this.secondaryButtonBorderStyle || (this.secondaryButtonBorderWidth || this.secondaryButtonBorderColor ? 'solid' : '');
        if (style === 'none') return '';
        if (style) {
          const width = this.secondaryButtonBorderWidth || '1px';
          const color = this.secondaryButtonBorderColor || this.secondaryButtonTextColor || '#1a1a1a';
          return ' border: ' + width + ' ' + style + ' ' + color + ';';
        }
        return ' border: 1px solid #1a1a1a;';
      },
      secondaryButtonFontSize: get('secondary-button-font-size', '12px'),
      secondaryButtonFontWeight: get('secondary-button-font-weight', '700'),
      secondaryButtonLetterSpacing: get('secondary-button-letter-spacing', '2px'),
      secondaryButtonTextTransform: get('secondary-button-text-transform', 'uppercase'),
      // UTM Tracking
      utmSource: get('utm-source', 'email'),
      utmMedium: get('utm-medium', 'lifecycle'),
      utmCampaign: get('utm-campaign'),
      utmContent: get('utm-content'),
      utmTerm: get('utm-term'),
      secondaryUtmSource: get('secondary-utm-source'),
      secondaryUtmMedium: get('secondary-utm-medium'),
      secondaryUtmCampaign: get('secondary-utm-campaign'),
      secondaryUtmContent: get('secondary-utm-content'),
      secondaryUtmTerm: get('secondary-utm-term'),
      get fullPrimaryUrl() {
        let url = this.primaryButtonUrl;
        const params = [];
        if (this.utmSource) params.push('utm_source=' + this.utmSource);
        if (this.utmMedium) params.push('utm_medium=' + this.utmMedium);
        if (this.utmCampaign) params.push('utm_campaign=' + this.utmCampaign);
        if (this.utmContent) params.push('utm_content=' + this.utmContent);
        if (this.utmTerm) params.push('utm_term=' + this.utmTerm);
        if (params.length) url += (url.includes('?') ? '&' : '?') + params.join('&');
        return url;
      },
      get fullSecondaryUrl() {
        let url = this.secondaryButtonUrl;
        const params = [];
        if (this.secondaryUtmSource) params.push('utm_source=' + this.secondaryUtmSource);
        if (this.secondaryUtmMedium) params.push('utm_medium=' + this.secondaryUtmMedium);
        if (this.secondaryUtmCampaign) params.push('utm_campaign=' + this.secondaryUtmCampaign);
        if (this.secondaryUtmContent) params.push('utm_content=' + this.secondaryUtmContent);
        if (this.secondaryUtmTerm) params.push('utm_term=' + this.secondaryUtmTerm);
        if (params.length) url += (url.includes('?') ? '&' : '?') + params.join('&');
        return url;
      },
      // Background
      textBgColor: get('text-bg-color'),
      // Layout
      textAlign: get('text-align', 'left'),
      contentPadding: get('content-padding', '32px'),
      contentValign: get('content-valign', 'middle'),
      // Content detection
      get hasContent() {
        return !!(this.eyebrow || this.headline || this.description || this.primaryButtonText);
      },
      // Mobile overrides
      mEyebrowSize: get('m:eyebrow-size'),
      mHeadlineSize: get('m:headline-size'),
      mDescriptionSize: get('m:description-size'),
      mContentPadding: get('m:content-padding'),
      mTextAlign: get('m:text-align'),
      mPrimaryButtonFontSize: get('m:primary-button-font-size'),
      mPrimaryButtonPadding: get('m:primary-button-padding'),
      mPrimaryButtonRadius: get('m:primary-button-radius'),
      mPrimaryButtonLetterSpacing: get('m:primary-button-letter-spacing'),
      mSecondaryButtonFontSize: get('m:secondary-button-font-size'),
      mSecondaryButtonPadding: get('m:secondary-button-padding'),
      mSecondaryButtonRadius: get('m:secondary-button-radius'),
      mSecondaryButtonLetterSpacing: get('m:secondary-button-letter-spacing'),
      mButtonGap: get('m:button-gap'),
    };
  };

  const left = buildSide('left');
  const right = buildSide('right');

  module.exports = {
    rooftop: props.rooftop || '',
    left,
    right,
    sides: [left, right],
    // Section-level props (not per-side)
    bgColor: getSectionProp('bg-color'),
    borderColor: getSectionProp('border-color'),
    borderWidth: getSectionProp('border-width', '0px'),
    borderStyle: getSectionProp('border-style', 'none'),
    borderTopColor: getSectionProp('border-top-color'),
    borderTopWidth: getSectionProp('border-top-width'),
    borderTopStyle: getSectionProp('border-top-style'),
    borderRightColor: getSectionProp('border-right-color'),
    borderRightWidth: getSectionProp('border-right-width'),
    borderRightStyle: getSectionProp('border-right-style'),
    borderBottomColor: getSectionProp('border-bottom-color'),
    borderBottomWidth: getSectionProp('border-bottom-width'),
    borderBottomStyle: getSectionProp('border-bottom-style'),
    borderLeftColor: getSectionProp('border-left-color'),
    borderLeftWidth: getSectionProp('border-left-width'),
    borderLeftStyle: getSectionProp('border-left-style'),
    borderRadius: getSectionProp('border-radius'),
    get borderCss() {
      const sides = [
        { s: 'top', c: this.borderTopColor, w: this.borderTopWidth, st: this.borderTopStyle },
        { s: 'right', c: this.borderRightColor, w: this.borderRightWidth, st: this.borderRightStyle },
        { s: 'bottom', c: this.borderBottomColor, w: this.borderBottomWidth, st: this.borderBottomStyle },
        { s: 'left', c: this.borderLeftColor, w: this.borderLeftWidth, st: this.borderLeftStyle },
      ];
      const perSide = sides.filter(x => x.c).map(x => ' border-' + x.s + ': ' + (x.w || this.borderWidth || '1px') + ' ' + (x.st || this.borderStyle || 'solid') + ' ' + x.c + ';').join('');
      if (perSide) return perSide;
      return this.borderColor ? ' border: ' + this.borderWidth + ' ' + this.borderStyle + ' ' + this.borderColor + ';' : '';
    },
    mBorderRadius: getSectionProp('m:border-radius'),
    scopeClass: 'loomi-c' + (props['component-index'] || '0'),
    get responsiveCss() {
      const r = [];
      const s = '.' + this.scopeClass + ' ';
      // Stack columns on mobile: convert table to block and go full-width
      r.push(s + '.loomi-split-table, ' + s + '.loomi-split-table > tbody, ' + s + '.loomi-split-table > tbody > tr { display: block !important; width: 100% !important; }');
      r.push(s + '.loomi-split-col { display: block !important; width: 100% !important; }');
      // Per-side mobile rules
      const allSides = [this.left, this.right];
      for (let i = 0; i < allSides.length; i++) {
        const side = allSides[i];
        const colSel = s + '.' + side.sideClass;
        const sc = colSel + ' ';
        // Reset cover mode on mobile: remove bg-image, restore natural img
        r.push(colSel + ' { background-image: none !important; }');
        r.push(sc + '.loomi-split-img { height: auto !important; overflow: visible !important; width: 100% !important; }');
        // Text wrapping safety
        r.push(sc + '.loomi-split-headline, ' + sc + '.loomi-split-desc { overflow-wrap: anywhere !important; word-break: break-word !important; }');
        // Buttons: ensure full-width on mobile
        r.push(sc + '.loomi-btn-table { width: 100% !important; max-width: 100% !important; }');
        r.push(sc + '.loomi-btn-primary, ' + sc + '.loomi-btn-secondary { display: block !important; width: 100% !important; max-width: 100% !important; box-sizing: border-box !important; text-align: center !important; }');
        // Default mobile fallbacks
        if (!side.mContentPadding) r.push(sc + '.loomi-split-text-inner { padding: 24px !important; }');
        if (!side.mHeadlineSize) r.push(sc + '.loomi-split-headline { font-size: 24px !important; }');
        if (!side.mDescriptionSize) r.push(sc + '.loomi-split-desc { font-size: 14px !important; }');
        // Conditional mobile overrides
        if (side.mEyebrowSize) r.push(sc + '.loomi-split-eyebrow { font-size: ' + side.mEyebrowSize + ' !important; }');
        if (side.mHeadlineSize) r.push(sc + '.loomi-split-headline { font-size: ' + side.mHeadlineSize + ' !important; }');
        if (side.mDescriptionSize) r.push(sc + '.loomi-split-desc { font-size: ' + side.mDescriptionSize + ' !important; }');
        if (side.mContentPadding) r.push(sc + '.loomi-split-text-inner { padding: ' + side.mContentPadding + ' !important; }');
        if (side.mTextAlign) r.push(sc + '.loomi-split-text-inner { text-align: ' + side.mTextAlign + ' !important; }');
        if (side.mPrimaryButtonFontSize) r.push(sc + '.loomi-btn-primary { font-size: ' + side.mPrimaryButtonFontSize + ' !important; }');
        if (side.mPrimaryButtonPadding) r.push(sc + '.loomi-btn-primary { padding: ' + side.mPrimaryButtonPadding + ' !important; }');
        if (side.mPrimaryButtonRadius) r.push(sc + '.loomi-btn-primary { border-radius: ' + side.mPrimaryButtonRadius + ' !important; }');
        if (side.mPrimaryButtonLetterSpacing) r.push(sc + '.loomi-btn-primary { letter-spacing: ' + side.mPrimaryButtonLetterSpacing + ' !important; }');
        if (side.mSecondaryButtonFontSize) r.push(sc + '.loomi-btn-secondary { font-size: ' + side.mSecondaryButtonFontSize + ' !important; }');
        if (side.mSecondaryButtonPadding) r.push(sc + '.loomi-btn-secondary { padding: ' + side.mSecondaryButtonPadding + ' !important; }');
        if (side.mSecondaryButtonRadius) r.push(sc + '.loomi-btn-secondary { border-radius: ' + side.mSecondaryButtonRadius + ' !important; }');
        if (side.mSecondaryButtonLetterSpacing) r.push(sc + '.loomi-btn-secondary { letter-spacing: ' + side.mSecondaryButtonLetterSpacing + ' !important; }');
        if (side.mButtonGap) r.push(sc + '.loomi-btn-gap { padding-right: ' + side.mButtonGap + ' !important; }');
      }
      if (this.mBorderRadius) r.push(s + '.loomi-split-outer { border-radius: ' + this.mBorderRadius + ' !important; overflow: hidden !important; }');
      return r.join(' ');
    },
  };
</script>

<if condition="responsiveCss">
  <style>
    @media screen and (max-width: 600px) {
      {{{ responsiveCss }}}
    }
  </style>
</if>

<tr class="{{ scopeClass }}">
  <td
    class="loomi-split-outer"
    style="width: 100%;{{ bgColor ? ' background-color: ' + bgColor + ';' : '' }}{{ borderCss }}{{ borderRadius ? ' border-radius: ' + borderRadius + '; overflow: hidden;' : '' }}"
  >
    <!--
      Both columns are full content areas. Left column stacks on top on mobile.
    -->
    <table class="loomi-split-table" role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="table-layout: fixed;">
      <tr>
        <!-- Left column -->
        <td
          class="loomi-split-col loomi-split-left"
          width="50%"
          valign="{{ left.contentValign }}"
          background="{{ left.imageFit === 'cover' && left.image ? left.image : '' }}"
          style="padding: 0;{{ left.imageFit === 'cover' && left.image ? ' background-size: cover; background-position: ' + left.imagePosition + '; background-repeat: no-repeat;' : '' }}"
        >
          <if condition="left.image">
            <img
              class="loomi-split-img"
              src="{{ left.image }}"
              style="display: block; width: 100%;{{ left.imageFit === 'cover' ? ' height: 0; overflow: hidden;' : ' height: auto;' }} border: 0;"
              alt="{{ left.imageAlt }}"
            />
          </if>
          <if condition="left.hasContent">
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0"{{ left.hasOverlay ? ' style="background-color: ' + left.overlayRgba + ';"' : '' }}>
              <tr>
                <td class="loomi-split-text-inner" style="padding: {{ left.contentPadding }}; text-align: {{ left.textAlign }};{{ !left.hasOverlay && left.textBgColor ? ' background-color: ' + left.textBgColor + ';' : '' }}">
                  <if condition="left.eyebrow">
                    <p class="loomi-split-eyebrow" style="font-family: {{ left.font }}; font-size: {{ left.eyebrowSize }}; font-weight: {{ left.eyebrowWeight }}; letter-spacing: {{ left.eyebrowSpacing }}; text-transform: {{ left.eyebrowTransform }}; color: {{ left.eyebrowColor }}; margin: {{ left.eyebrowMargin }};">
                      {{ left.eyebrow }}
                    </p>
                  </if>
                  <if condition="left.headline">
                    <h2 class="loomi-split-headline" style="font-family: {{ left.font }}; font-size: {{ left.headlineSize }}; font-weight: {{ left.headlineWeight }}; letter-spacing: {{ left.headlineSpacing }}; text-transform: {{ left.headlineTransform }}; line-height: {{ left.headlineLineHeight }}; color: {{ left.headlineColor }}; margin: {{ left.headlineMargin }};">
                      {{{ left.headline }}}
                    </h2>
                  </if>
                  <if condition="left.description">
                    <p class="loomi-split-desc" style="font-family: {{ left.font }}; font-size: {{ left.descriptionSize }}; font-weight: {{ left.descriptionWeight }}; line-height: {{ left.descriptionLineHeight }}; color: {{ left.descriptionColor }}; margin: {{ left.descriptionMargin }};">
                      {{{ left.description }}}
                    </p>
                  </if>
                  <if condition="left.primaryButtonText">
                    <table class="loomi-btn-table" role="presentation" cellspacing="0" cellpadding="0" border="0" style="width: 100%; max-width: 100%;{{ left.textAlign === 'center' ? ' margin: 0 auto;' : '' }}">
                      <tr>
                        <td>
                          <a
                            class="loomi-btn-primary"
                            href="{{ left.fullPrimaryUrl }}"
                            target="_blank"
                            style="display: block; width: 100%; text-align: center; box-sizing: border-box; background-color: {{ left.primaryButtonBgColor }}; border-radius: {{ left.primaryButtonRadius }}; color: {{ left.primaryButtonTextColor }}; font-family: {{ left.font }}; font-size: {{ left.primaryButtonFontSize }}; font-weight: {{ left.primaryButtonFontWeight }}; letter-spacing: {{ left.primaryButtonLetterSpacing }}; text-decoration: none; text-transform: {{ left.primaryButtonTextTransform }}; padding: {{ left.primaryButtonPadding }};{{ left.primaryButtonBorderCss }}"
                          >
                            {{ left.primaryButtonText }}
                          </a>
                        </td>
                      </tr>
                      <if condition="left.secondaryButtonText">
                        <tr>
                          <td style="padding-top: {{ left.buttonGap }};">
                            <a
                              class="loomi-btn-secondary"
                              href="{{ left.fullSecondaryUrl }}"
                              target="_blank"
                              style="display: block; width: 100%; text-align: center; box-sizing: border-box; background-color: {{ left.secondaryButtonBgColor }}; border-radius: {{ left.secondaryButtonRadius }}; color: {{ left.secondaryButtonTextColor }}; font-family: {{ left.font }}; font-size: {{ left.secondaryButtonFontSize }}; font-weight: {{ left.secondaryButtonFontWeight }}; letter-spacing: {{ left.secondaryButtonLetterSpacing }}; text-decoration: none; text-transform: {{ left.secondaryButtonTextTransform }}; padding: {{ left.secondaryButtonPadding }};{{ left.secondaryButtonBorderCss }}"
                            >
                              {{ left.secondaryButtonText }}
                            </a>
                          </td>
                        </tr>
                      </if>
                    </table>
                  </if>
                </td>
              </tr>
            </table>
          </if>
        </td>
        <!-- Right column -->
        <td
          class="loomi-split-col loomi-split-right"
          width="50%"
          valign="{{ right.contentValign }}"
          background="{{ right.imageFit === 'cover' && right.image ? right.image : '' }}"
          style="padding: 0;{{ right.imageFit === 'cover' && right.image ? ' background-size: cover; background-position: ' + right.imagePosition + '; background-repeat: no-repeat;' : '' }}"
        >
          <if condition="right.image">
            <img
              class="loomi-split-img"
              src="{{ right.image }}"
              style="display: block; width: 100%;{{ right.imageFit === 'cover' ? ' height: 0; overflow: hidden;' : ' height: auto;' }} border: 0;"
              alt="{{ right.imageAlt }}"
            />
          </if>
          <if condition="right.hasContent">
            <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0"{{ right.hasOverlay ? ' style="background-color: ' + right.overlayRgba + ';"' : '' }}>
              <tr>
                <td class="loomi-split-text-inner" style="padding: {{ right.contentPadding }}; text-align: {{ right.textAlign }};{{ !right.hasOverlay && right.textBgColor ? ' background-color: ' + right.textBgColor + ';' : '' }}">
                  <if condition="right.eyebrow">
                    <p class="loomi-split-eyebrow" style="font-family: {{ right.font }}; font-size: {{ right.eyebrowSize }}; font-weight: {{ right.eyebrowWeight }}; letter-spacing: {{ right.eyebrowSpacing }}; text-transform: {{ right.eyebrowTransform }}; color: {{ right.eyebrowColor }}; margin: {{ right.eyebrowMargin }};">
                      {{ right.eyebrow }}
                    </p>
                  </if>
                  <if condition="right.headline">
                    <h2 class="loomi-split-headline" style="font-family: {{ right.font }}; font-size: {{ right.headlineSize }}; font-weight: {{ right.headlineWeight }}; letter-spacing: {{ right.headlineSpacing }}; text-transform: {{ right.headlineTransform }}; line-height: {{ right.headlineLineHeight }}; color: {{ right.headlineColor }}; margin: {{ right.headlineMargin }};">
                      {{{ right.headline }}}
                    </h2>
                  </if>
                  <if condition="right.description">
                    <p class="loomi-split-desc" style="font-family: {{ right.font }}; font-size: {{ right.descriptionSize }}; font-weight: {{ right.descriptionWeight }}; line-height: {{ right.descriptionLineHeight }}; color: {{ right.descriptionColor }}; margin: {{ right.descriptionMargin }};">
                      {{{ right.description }}}
                    </p>
                  </if>
                  <if condition="right.primaryButtonText">
                    <table class="loomi-btn-table" role="presentation" cellspacing="0" cellpadding="0" border="0" style="width: 100%; max-width: 100%;{{ right.textAlign === 'center' ? ' margin: 0 auto;' : '' }}">
                      <tr>
                        <td>
                          <a
                            class="loomi-btn-primary"
                            href="{{ right.fullPrimaryUrl }}"
                            target="_blank"
                            style="display: block; width: 100%; text-align: center; box-sizing: border-box; background-color: {{ right.primaryButtonBgColor }}; border-radius: {{ right.primaryButtonRadius }}; color: {{ right.primaryButtonTextColor }}; font-family: {{ right.font }}; font-size: {{ right.primaryButtonFontSize }}; font-weight: {{ right.primaryButtonFontWeight }}; letter-spacing: {{ right.primaryButtonLetterSpacing }}; text-decoration: none; text-transform: {{ right.primaryButtonTextTransform }}; padding: {{ right.primaryButtonPadding }};{{ right.primaryButtonBorderCss }}"
                          >
                            {{ right.primaryButtonText }}
                          </a>
                        </td>
                      </tr>
                      <if condition="right.secondaryButtonText">
                        <tr>
                          <td style="padding-top: {{ right.buttonGap }};">
                            <a
                              class="loomi-btn-secondary"
                              href="{{ right.fullSecondaryUrl }}"
                              target="_blank"
                              style="display: block; width: 100%; text-align: center; box-sizing: border-box; background-color: {{ right.secondaryButtonBgColor }}; border-radius: {{ right.secondaryButtonRadius }}; color: {{ right.secondaryButtonTextColor }}; font-family: {{ right.font }}; font-size: {{ right.secondaryButtonFontSize }}; font-weight: {{ right.secondaryButtonFontWeight }}; letter-spacing: {{ right.secondaryButtonLetterSpacing }}; text-decoration: none; text-transform: {{ right.secondaryButtonTextTransform }}; padding: {{ right.secondaryButtonPadding }};{{ right.secondaryButtonBorderCss }}"
                            >
                              {{ right.secondaryButtonText }}
                            </a>
                          </td>
                        </tr>
                      </if>
                    </table>
                  </if>
                </td>
              </tr>
            </table>
          </if>
        </td>
      </tr>
    </table>
  </td>
</tr>
